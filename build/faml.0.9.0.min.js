/*! faml 0.9.0 2014-09-23 */
!function(a){function b(){return{subject:"",label_nest_level:0,pos:0,match:t,peek:u,parseSpaceAndNewline:v,parseBackticks:w,parseEscaped:x,scanDelims:y,parseEmphasis:z,parseLinkTitle:A,parseLinkDestination:B,parseLinkLabel:C,parseLink:E,parseEntity:F,parseString:G,parseNewline:H,parseInline:I,parse:J}}function c(){return{doc:K("Document",1,1),tip:this.doc,inlineParser:new b,breakOutOfLists:N,addLine:O,addChild:P,incorporateLine:S,finalize:T,processInlines:U,parse:V}}function d(){var a=new c;return{parse:function(b){return b=W(b),a.parse(b)}}}var e="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",f="\\\\"+e,g="[^\\\\()\\x00-\\x20]",h="\\(("+g+"|"+f+")*\\)",i=new RegExp('^(?:"('+f+'|[^"\\x00])*"|\'('+f+"|[^'\\x00])*'|\\(("+f+"|[^)\\x00])*\\))"),j=new RegExp("^(?:[<](?:[^<>\\n\\\\\\x00]|"+f+"|\\\\)*[>])"),k=new RegExp("^(?:"+g+"+|"+f+"|"+h+")*"),l=new RegExp(e),m=new RegExp("\\\\("+e+")","g"),n=/\t/g,o=new RegExp("(]\\(){0,1}(https?|ftp):\\/\\/[^\\s]+","g"),p=/^(?:[\n`\[\]\\!<&*_]|[^\n`\[\]\\!<&*_]+)/m,q=function(a){return a.replace(m,"$1")},r=function(a,b,c){var d=b.slice(c).match(a);return d?c+d.index:null},s=function(a){if(-1==a.indexOf("	"))return a;var b=0;return a.replace(n,function(a,c){var d="    ".slice((c-b)%4);return b=c+1,d})},t=function(a){var b=a.exec(this.subject.slice(this.pos));return b?(this.pos+=b.index+b[0].length,b[0]):null},u=function(){return this.subject[this.pos]||null},v=function(){return this.match(/^ *(?:\n *)?/),1},w=function(a){var b=this.pos,c=this.match(/^`+/);if(!c)return 0;for(var d,e=this.pos,f=!1;!f&&(d=this.match(/`+/m));)if(d==c)return a.push({t:"Code",c:this.subject.slice(e,this.pos-c.length).replace(/[ \n]+/g," ").trim()}),this.pos-b;return a.push({t:"Str",c:c}),this.pos=e,this.pos-b},x=function(a){var b=this.subject,c=this.pos;return"\\"===b[c]?l.test(b[c+1])?(a.push({t:"Str",c:b[c+1]}),this.pos=this.pos+2,2):(this.pos++,a.push({t:"Str",c:"\\"}),1):0},y=function(a){var b,c,d=0,e=this.pos;for(b=0===this.pos?"\n":this.subject[this.pos-1];this.peek()===a;)d++,this.pos++;c=this.peek()||"\n";var f=d>0&&3>=d&&!/\s/.test(c),g=d>0&&3>=d&&!/\s/.test(b);return"_"===a&&(f=f&&!/[a-z0-9]/i.test(b),g=g&&!/[a-z0-9]/i.test(c)),this.pos=e,{numdelims:d,can_open:f,can_close:g}},z=function(a){var b,c=this.pos,d=0,e=this.peek();if("*"!=e&&"_"!=e)return 0;b=e;var f,g;if(res=this.scanDelims(b),f=res.numdelims,this.pos+=f,a.push({t:"Str",c:this.subject.substr(this.pos-f,f)}),g=a.length-1,!res.can_open||0===f)return 0;var h=0;switch(f){case 1:for(;;){if(res=this.scanDelims(b),res.numdelims>=1&&res.can_close){this.pos+=1,a[g].t="Emph",a[g].c=a.slice(g+1),a.splice(g+1);break}if(0===this.parseInline(a))break}return this.pos-c;case 2:for(;;){if(res=this.scanDelims(b),res.numdelims>=2&&res.can_close){this.pos+=2,a[g].t="Strong",a[g].c=a.slice(g+1),a.splice(g+1);break}if(0===this.parseInline(a))break}return this.pos-c;case 3:for(;;)if(res=this.scanDelims(b),res.numdelims>=1&&res.numdelims<=3&&res.can_close&&res.numdelims!=h){if(1===h&&f>2?res.numdelims=2:2===h?res.numdelims=1:3===res.numdelims&&(res.numdelims=1),this.pos+=res.numdelims,d>0){a[g].t=1===h?"Strong":"Emph",a[g].c=[{t:1===h?"Emph":"Strong",c:a.slice(g+1,d)}].concat(a.slice(d+1)),a.splice(g+1);break}a.push({t:"Str",c:this.subject.slice(this.pos-res.numdelims,this.pos)}),d=a.length-1,h=res.numdelims}else if(0===this.parseInline(a))break;return this.pos-c;default:return res}return 0},A=function(){var a=this.match(i);return a?q(a.substr(1,a.length-2)):null},B=function(){var a=this.match(j);return a?q(a.substr(1,a.length-2)):(a=this.match(k),null!==a?q(a):null)},C=function(){if("["!=this.peek())return 0;var a=this.pos,b=0;if(this.label_nest_level>0)return this.label_nest_level--,0;this.pos++;for(var c;(c=this.peek())&&("]"!=c||b>0);)switch(c){case"`":this.parseBackticks([]);break;case"<":this.parseString([]);break;case"[":b++,this.pos++;break;case"]":b--,this.pos++;break;case"\\":this.parseEscaped([]);break;default:this.parseString([])}return"]"===c?(this.label_nest_level=0,this.pos++,this.pos-a):(c||(this.label_nest_level=b),this.pos=a,0)},D=function(a){return(new b).parse(a.substr(1,a.length-2),{})},E=function(a){var b,c,d,e=this.pos;if(b=this.parseLinkLabel(),0===b)return 0;var f=this.subject.substr(e,b);return"("==this.peek()?(this.pos++,this.parseSpaceAndNewline()&&null!==(c=this.parseLinkDestination())&&this.parseSpaceAndNewline()&&this.parseSpaceAndNewline()&&this.match(/^\)/)?(a.push({t:"Link",destination:c,title:d,label:D(f)}),this.pos-e):(this.pos=e,0)):(this.pos=e,0)},F=function(a){var b;return(b=this.match(/^&(?:#x[a-f0-9]{1,8}|#[0-9]{1,8}|[a-z][a-z0-9]{1,31});/i))?(a.push({t:"Entity",c:b}),b.length):0},G=function(a){var b;return(b=this.match(p))?(a.push({t:"Str",c:b}),b.length):0},H=function(a){if("\n"==this.peek()){this.pos++;var b=a[a.length-1];return b&&"Str"==b.t&&" "==b.c.slice(-1)&&(b.c=b.c.slice(0,-1)),a.push({t:"Linebreak"}),1}return 0},I=function(a){var b,c=this.peek();switch(c){case"\n":b=this.parseNewline(a);break;case"\\":b=this.parseEscaped(a);break;case"`":b=this.parseBackticks(a);break;case"*":b=this.parseEmphasis(a);break;case"[":b=this.parseLink(a);break;case"&":b=this.parseEntity(a)}return b||this.parseString(a)},J=function(a){this.subject=a,this.pos=0;for(var b=[];this.parseInline(b););return b},K=function(a,b,c){return{t:a,open:!0,last_line_blank:!1,start_line:b,start_column:c,end_line:b,children:[],parent:null,string_content:"",strings:[],inline_content:[]}},L=function(a,b){return"Document"==a||"BlockQuote"==a||"ListItem"==a||"List"==a&&"ListItem"==b},M=function(a){return"Paragraph"==a||"FencedCode"==a},N=function(a,b){var c=a,d=null;do"List"===c.t&&(d=c),c=c.parent;while(c);if(d){for(;a!=d;)this.finalize(a,b),a=a.parent;this.finalize(d,b),this.tip=d.parent}},O=function(a,b){var c=a.slice(b);if(!this.tip.open)throw{msg:"Attempted to add line ("+a+") to closed container."};this.tip.strings.push(c)},P=function(a,b,c){for(;!L(this.tip.t,a);)this.finalize(this.tip,b);var d=c+1,e=K(a,b,d);return this.tip.children.push(e),e.parent=this.tip,this.tip=e,e},Q=function(a,b){var c,d,e=a.slice(b),f={};if(c=e.match(/^\*(\s|$)/))d=c[1].length,f.type="Bullet",f.bullet_char=c[0][0];else{if(!(c=e.match(/^(\d+)([.])(\s|$)/)))return null;d=c[3].length,f.type="Ordered",f.start=parseInt(c[1]),f.delimiter=c[2]}var g=c[0].length===e.length;return f.padding=d>=5||1>d||g?c[0].length-d+1:c[0].length,f},R=function(a,b){return a.type===b.type},S=function(a,b){var c,d,e,f,g,h,i,j,k=!0,l=0,m=this.doc,n=this.tip;for(a=s(a);m.children.length>0&&(c=m.children[m.children.length-1],c.open);){switch(m=c,e=r(/[^ ]/,a,l),null===e?(d=a.length,g=!0):(d=e,g=!1),h=d-l,m.t){case"BlockQuote":var o=3>=h&&">"===a[d];o?(l=d+1," "===a[l]&&l++):k=!1;break;case"ListItem":h>=m.list_data.marker_offset+m.list_data.padding?l+=m.list_data.marker_offset+m.list_data.padding:g?l=d:k=!1;break;case"Header":k=!1;break;case"FencedCode":for(j=m.fence_offset;j>0&&" "===a[l];)l++,j--;break;case"Paragraph":g&&(m.last_line_blank=!0,k=!1)}if(!k){m=m.parent;break}}i=m;var p=function(a){for(;!c&&n!=i;)a.finalize(n,b),n=n.parent;var c=!0};for(g&&m.last_line_blank&&this.breakOutOfLists(m,b);"FencedCode"!=m.t&&null!==r(/^[ #`~*+_=<>0-9-]/,a,l);){if(e=r(/[^ ]/,a,l),null===e?(d=a.length,g=!0):(d=e,g=!1),h=d-l,">"===a[d])l=d+1," "===a[l]&&l++,p(this),m=this.addChild("BlockQuote",b,l);else{if(e=a.slice(d).match(/^#{1,6}(?: +|$)/)){l=d+e[0].length,p(this),m=this.addChild("Header",b,d),m.level=e[0].trim().length,m.strings=[a.slice(l).replace(/(?:(\\#) *#*| *#+) *$/,"$1")];break}if(e=a.slice(d).match(/^`{3,}(?!.*`)|^~{3,}(?!.*~)/)){var q=e[0].length;p(this),m=this.addChild("FencedCode",b,d),m.fence_length=q,m.fence_char=e[0][0],m.fence_offset=d-l,l=d+q;break}if(!(f=Q(a,d)))break;p(this),f.marker_offset=h,l=d+f.padding,"List"===m.t&&R(m.list_data,f)||(m=this.addChild("List",b,d),m.list_data=f),m=this.addChild("ListItem",b,d),m.list_data=f}if(M(m.t))break}if(e=r(/[^ ]/,a,l),null===e?(d=a.length,g=!0):(d=e,g=!1),h=d-l,this.tip!==i&&!g&&"Paragraph"==this.tip.t&&this.tip.strings.length>0)this.last_line_blank=!1,this.addLine(a,l);else{p(this),m.last_line_blank=g&&!("BlockQuote"==m.t||"FencedCode"==m.t||"ListItem"==m.t&&0===m.children.length&&m.start_line==b);for(var t=m;t.parent;)t.parent.last_line_blank=!1,t=t.parent;switch(m.t){case"FencedCode":e=3>=h&&a[d]==m.fence_char&&a.slice(d).match(/^(?:`{3,}|~{3,})(?= *$)/),e&&e[0].length>=m.fence_length?this.finalize(m,b):this.addLine(a,l);break;case"Header":break;default:M(m.t)?this.addLine(a,d):g||(m=this.addChild("Paragraph",b,d),this.addLine(a,d))}}},T=function(a,b){if(!a.open)return 0;switch(a.open=!1,a.end_line=b>a.start_line?b-1:b,a.t){case"Paragraph":a.string_content=a.strings.join("\n").replace(/^  */m,"");break;case"Header":a.string_content=a.strings.join("\n");break;case"FencedCode":a.info=q(a.strings[0].trim()),a.string_content=1==a.strings.length?"":a.strings.slice(1).join("\n")+"\n"}this.tip=a.parent||this.top},U=function(a){switch(a.t){case"Paragraph":case"Header":a.inline_content=this.inlineParser.parse(a.string_content.trim()),a.string_content=""}if(a.children)for(var b=0;b<a.children.length;b++)this.processInlines(a.children[b])},V=function(a){this.doc=K("Document",1,1),this.tip=this.doc;for(var b=a.replace(/\n$/,"").split(/\r\n|\n|\r/),c=b.length,d=0;c>d;d++)this.incorporateLine(b[d],d+1);for(;this.tip;)this.finalize(this.tip,c-1);return this.processInlines(this.doc),this.doc},W=function(a){return a.replace(o,function(a){return"]"==a[0]&&"("==a[1]?a:"["+a+"]("+a+")"})};a.FamlParser=d}("undefined"==typeof exports?this.faml||(this.faml={}):exports),function(a){function b(){return{fencedClass:"language-",render:function(a){return i.renderBlock(a,!1,this.fencedClass)}}}var c=function(a,b,c,d){var e="<"+a;if(b)for(var f,g=0;void 0!==(f=b[g]);)e=e.concat(" ",f[0],'="',f[1],'"'),g++;return c?e=e.concat(">",c,"</",a,">"):d?e+=" />":e=e.concat("></",a,">"),e},d=function(a){var b;switch(a.t){case"Str":return h(a.c);case"Linebreak":return c("br",[],"",!0)+"\n";case"Emph":return c("em",[],this.renderInlines(a.c));case"Strong":return c("strong",[],this.renderInlines(a.c));case"Entity":return a.c;case"Link":return b=[["href",h(a.destination,!0)]],a.title&&b.push(["title",h(a.title,!0)]),c("a",b,this.renderInlines(a.label));case"Code":return c("code",[],h(a.c));default:return console.log("Unknown inline type "+a.t),""}},e=function(a){for(var b="",c=0;c<a.length;c++)b+=this.renderInline(a[c]);return b},f=function(a,b,d){var e,f,g;switch(a.t){case"Document":var i=this.renderBlocks(a.children,b,d);return""===i?"":i+"\n";case"Paragraph":return b?this.renderInlines(a.inline_content):c("p",[],this.renderInlines(a.inline_content));case"BlockQuote":var j=this.renderBlocks(a.children,b,d);return c("blockquote",[],""===j?"\n":"\n"+this.renderBlocks(a.children,b,d)+"\n");case"ListItem":return c("li",[],this.renderBlocks(a.children,!0,d).trim());case"List":return e="Bullet"==a.list_data.type?"ul":"ol",f=a.list_data.start&&1!=a.list_data.start?[["start",a.list_data.start.toString()]]:[],c(e,f,"\n"+this.renderBlocks(a.children,b,d)+"\n");case"Header":return e="h"+a.level,c(e,[],this.renderInlines(a.inline_content));case"FencedCode":return g=a.info.split(/ +/),f=0===g.length||0===g[0].length?[]:[["class",d+h(g[0],!0)]],c("pre",[],c("code",f,h(a.string_content)));default:return console.log("Unknown block type "+a.t),""}},g=function(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push(this.renderBlock(a[e],b,c));return d.join("\n")},h=function(a,b){return b?a.replace(/[&](?![#](x[a-f0-9]{1,8}|[0-9]{1,8});|[a-z][a-z0-9]{1,31};)/gi,"&amp;").replace(/[<]/g,"&lt;").replace(/[>]/g,"&gt;").replace(/["]/g,"&quot;"):a.replace(/[&]/g,"&amp;").replace(/[<]/g,"&lt;").replace(/[>]/g,"&gt;").replace(/["]/g,"&quot;")},i={renderInline:d,renderInlines:e,renderBlock:f,renderBlocks:g};a.FamlRenderer=b}("undefined"==typeof exports?this.faml||(this.faml={}):exports);